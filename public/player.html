<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./favicon.ico" />
  <title>录制回放</title>
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
      min-width: 700px;
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }


    .video {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 80%;
    }

    .title {
      width: 80%;
      display: flex;
      align-items: center;
    }

    .error {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px solid #333;
      height: 50vh;
    }

    .primary-wrap,
    .backup-wrap {
      width: 40vw;
      min-width: 268px;
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 5px;
      overflow: hidden;
    }

    .primary,
    .backup {
      width: 100%;
      height: 50vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tools {
      margin: 50px auto;
      width: max-content;
      min-width: 60%;
      height: 40px;
      border-radius: 30px;
      background-color: #535557;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 5px;
    }

    button {
      margin: 0 16px;
      cursor: pointer;
      box-shadow: none;
      font-size: 14px;
      line-height: 20px;
      font-family: Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      border: 0 solid transparent;
      border-radius: 2px;
      padding: 6px 12px;
      font-weight: 600;
      outline: none;
      vertical-align: middle;
      white-space: nowrap;
      color: rgb(80, 86, 94);
    }

    .title svg,
    button svg {
      margin: 3px;
    }
  </style>
</head>

<body>
  <h3 class="title">
    <span>『 </span>
    <svg t="1635945329055" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
      p-id="1442" width="28" height="28">
      <path d="M552.448 547.3792m-351.2832 0a351.2832 351.2832 0 1 0 702.5664 0 351.2832 351.2832 0 1 0-702.5664 0Z"
        fill="#A5ADF6" p-id="1443"></path>
      <path
        d="M515.5328 423.5264c53.504 0 97.0752-43.52 97.0752-97.0752s-43.52-97.0752-97.0752-97.0752-97.0752 43.52-97.0752 97.0752 43.52 97.0752 97.0752 97.0752z m0-132.7104c19.6608 0 35.6352 15.9744 35.6352 35.6352s-15.9744 35.6352-35.6352 35.6352-35.6352-15.9744-35.6352-35.6352 15.9744-35.6352 35.6352-35.6352zM612.5568 680.7552c0-53.504-43.52-97.0752-97.0752-97.0752s-97.0752 43.52-97.0752 97.0752 43.52 97.0752 97.0752 97.0752 97.0752-43.52 97.0752-97.0752z m-132.6592 0c0-19.6608 15.9744-35.6352 35.6352-35.6352s35.6352 15.9744 35.6352 35.6352-15.9744 35.6352-35.6352 35.6352-35.6352-15.9744-35.6352-35.6352zM692.6848 600.6784c53.504 0 97.0752-43.52 97.0752-97.0752s-43.52-97.0752-97.0752-97.0752-97.0752 43.52-97.0752 97.0752 43.52 97.0752 97.0752 97.0752z m0-132.6592c19.6608 0 35.6352 15.9744 35.6352 35.6352s-15.9744 35.6352-35.6352 35.6352-35.6352-15.9744-35.6352-35.6352 15.9744-35.6352 35.6352-35.6352zM338.3296 406.5792c-53.504 0-97.0752 43.52-97.0752 97.0752s43.52 97.0752 97.0752 97.0752 97.0752-43.52 97.0752-97.0752-43.52-97.0752-97.0752-97.0752z m0 132.6592c-19.6608 0-35.6352-15.9744-35.6352-35.6352s15.9744-35.6352 35.6352-35.6352 35.6352 15.9744 35.6352 35.6352-15.9744 35.6352-35.6352 35.6352z"
        fill="#5D5D66" p-id="1444"></path>
      <path
        d="M875.52 867.5328h-143.9232c121.5488-74.3424 202.8544-208.2816 202.8544-360.9088 0-233.1136-189.6448-422.7072-422.7072-422.7072-233.1136 0-422.7072 189.6448-422.7072 422.7072s189.6448 422.7072 422.7072 422.7072c5.0176 0 9.984-0.2048 14.9504-0.3584H875.52c16.9472 0 30.72-13.7728 30.72-30.72s-13.7216-30.72-30.72-30.72zM150.4768 506.624c0-199.2192 162.048-361.2672 361.2672-361.2672s361.2672 162.0992 361.2672 361.2672c0 194.2016-154.0096 353.024-346.3168 360.9088h-3.1232c-1.0752 0-2.0992 0.0512-3.1232 0.1536-2.9184 0.0512-5.8368 0.2048-8.7552 0.2048-199.168 0.0512-361.216-162.048-361.216-361.2672z"
        fill="#5D5D66" p-id="1445"></path>
    </svg>
    <span> 回放 』</span>
  </h3>
  <div class="video">
    <div class="backup-wrap">
      <video class="backup" muted autoplay></video>
      <h4>过程视频轨道</h4>
    </div>
    <div class="primary-wrap">
      <video class="primary" muted autoplay></video>
      <h4>结果视频轨道</h4>
    </div>
  </div>
  <div class="tools">
    <button playBtn disabled>
      <svg t="1635944188446" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="7071" width="28" height="28">
        <path d="M554.8544 550.5536m-348.16 0a348.16 348.16 0 1 0 696.32 0 348.16 348.16 0 1 0-696.32 0Z" fill="#A5ADF6"
          p-id="7072"></path>
        <path
          d="M513.28 88.576c-231.8336 0-420.4032 188.6208-420.4032 420.4032s188.6208 420.4032 420.4032 420.4032 420.4032-188.6208 420.4032-420.4032-188.5696-420.4032-420.4032-420.4032z m0 779.3664c-197.9392 0-358.9632-161.024-358.9632-358.9632S315.3408 150.016 513.28 150.016s358.9632 161.024 358.9632 358.9632-161.024 358.9632-358.9632 358.9632z"
          fill="#5D5D66" p-id="7073"></path>
        <path
          d="M630.0672 445.3376L486.912 362.7008c-23.04-13.2608-50.4832-13.2608-73.5232 0-22.9888 13.2608-36.7616 37.0688-36.7616 63.6416v165.2736c0 26.5728 13.7216 50.3808 36.7616 63.6416 11.52 6.656 24.1152 9.984 36.7616 9.984 12.5952 0 25.2416-3.328 36.7616-9.984l143.104-82.6368c22.9888-13.2608 36.7616-37.0688 36.7616-63.6416 0-26.5728-13.7216-50.3808-36.7104-63.6416z m-30.72 74.0864L456.192 602.0608c-5.2224 3.0208-9.8304 1.28-12.0832 0-2.2528-1.28-6.0416-4.4032-6.0416-10.4448V426.3424c0-6.0416 3.7888-9.1648 6.0416-10.4448 1.3312-0.768 3.4816-1.6896 6.0416-1.6896 1.792 0 3.84 0.4608 5.9904 1.6896l143.104 82.6368c5.2224 3.0208 6.0416 7.8336 6.0416 10.4448 0.0512 2.6112-0.7168 7.424-5.9392 10.4448z"
          fill="#5D5D66" p-id="7074"></path>
      </svg>
      <span>播放</span>
    </button>
    <button puseBtn>
      <svg t="1635944851061" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="5570" width="28" height="28">
        <path
          d="M513 177c185.3 0 336 150.7 336 336S698.3 849 513 849 177 698.3 177 513s150.7-336 336-336m0-64c-220.9 0-400 179.1-400 400s179.1 400 400 400 400-179.1 400-400-179.1-400-400-400z"
          fill="#691FFF" p-id="5571"></path>
        <path
          d="M435 673h-4c-16.5 0-30-13.5-30-30V383c0-16.5 13.5-30 30-30h4c16.5 0 30 13.5 30 30v260c0 16.5-13.5 30-30 30zM595 673h-4c-16.5 0-30-13.5-30-30V383c0-16.5 13.5-30 30-30h4c16.5 0 30 13.5 30 30v260c0 16.5-13.5 30-30 30z"
          fill="#E04DFF" p-id="5572"></path>
      </svg>
      <span>暂停</span>
    </button>
    <button openBtn1>
      <svg t="1635944942399" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="1288" width="28" height="28">
        <path
          d="M885.0944 307.0976L780.2368 364.032v-4.864c0-45.3632-36.8128-82.176-82.176-82.176H295.0144c-45.3632 0-82.176 36.8128-82.176 82.176v373.1968c0 45.3632 36.8128 82.176 82.176 82.176h403.0464c45.3632 0 82.176-36.8128 82.176-82.176v-74.5472l96 43.3152 44.6976-16.5888V328.704l-35.84-21.6064z"
          fill="#A5ADF6" p-id="1289"></path>
        <path
          d="M571.8016 440.5248L458.9568 375.3472c-22.9888-13.2608-50.4832-13.2608-73.5232 0-22.9888 13.2608-36.7616 37.0688-36.7616 63.6416v130.3552c0 26.5728 13.7216 50.3808 36.7616 63.6416 11.52 6.656 24.1152 9.984 36.7616 9.984s25.2416-3.328 36.7616-9.984l112.8448-65.1776c22.9888-13.2608 36.7616-37.0688 36.7616-63.6416 0-26.5728-13.7216-50.3808-36.7616-63.6416z m-30.72 74.0864l-112.8448 65.1776c-5.2224 3.0208-9.8304 1.28-12.0832 0-2.2528-1.28-6.0416-4.4032-6.0416-10.4448V438.9888c0-6.0416 3.7888-9.1648 6.0416-10.4448 1.3312-0.768 3.4816-1.6896 6.0416-1.6896 1.792 0 3.84 0.4608 5.9904 1.6896l112.8448 65.1776c5.2224 3.0208 6.0416 7.8336 6.0416 10.4448 0.0512 2.6112-0.7168 7.424-5.9904 10.4448z"
          fill="#5D5D66" p-id="1290"></path>
        <path
          d="M920.0128 287.2832c-25.344-14.6432-55.6032-14.6432-80.9472 0l-28.16 16.2304V275.968c0-62.2592-50.6368-112.896-112.896-112.896H191.3856c-62.2592 0-112.896 50.6368-112.896 112.896v456.3968c0 62.2592 50.6368 112.896 112.896 112.896h506.6752c62.2592 0 112.896-50.6368 112.896-112.896v-27.5456l28.16 16.2304c12.6464 7.3216 26.5728 10.9568 40.448 10.9568s27.8016-3.6352 40.448-10.9568c25.344-14.6432 40.448-40.8064 40.448-70.0928V357.376c0.0512-29.2864-15.104-55.5008-40.448-70.0928z m-170.496 445.0816c0 28.3648-23.0912 51.456-51.456 51.456H191.3856c-28.3648 0-51.456-23.0912-51.456-51.456V275.968c0-28.3648 23.0912-51.456 51.456-51.456h506.6752c28.3648 0 51.456 23.0912 51.456 51.456v456.3968z m149.5552-81.3568c0 10.1376-6.8096 15.2064-9.728 16.896-2.9184 1.6896-10.7008 5.0688-19.5072 0l-58.88-33.9968V374.4768l58.88-33.9968c8.8064-5.0688 16.5888-1.6896 19.5072 0 2.9184 1.6896 9.728 6.7072 9.728 16.896v293.632z"
          fill="#5D5D66" p-id="1291"></path>
        <path
          d="M244.8384 246.3232c-42.0352 0-76.2368 34.2016-76.2368 76.2368s34.2016 76.2368 76.2368 76.2368S321.0752 364.5952 321.0752 322.56s-34.2016-76.2368-76.2368-76.2368z m0 91.0336c-8.192 0-14.7968-6.656-14.7968-14.7968 0-8.192 6.656-14.7968 14.7968-14.7968s14.7968 6.656 14.7968 14.7968-6.656 14.7968-14.7968 14.7968z"
          fill="#5D5D66" p-id="1292"></path>
      </svg>
      <span>查看过程视频轨道</span>
    </button>
    <button openBtn2>
      <svg t="1635944942399" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="1288" width="28" height="28">
        <path
          d="M885.0944 307.0976L780.2368 364.032v-4.864c0-45.3632-36.8128-82.176-82.176-82.176H295.0144c-45.3632 0-82.176 36.8128-82.176 82.176v373.1968c0 45.3632 36.8128 82.176 82.176 82.176h403.0464c45.3632 0 82.176-36.8128 82.176-82.176v-74.5472l96 43.3152 44.6976-16.5888V328.704l-35.84-21.6064z"
          fill="#A5ADF6" p-id="1289"></path>
        <path
          d="M571.8016 440.5248L458.9568 375.3472c-22.9888-13.2608-50.4832-13.2608-73.5232 0-22.9888 13.2608-36.7616 37.0688-36.7616 63.6416v130.3552c0 26.5728 13.7216 50.3808 36.7616 63.6416 11.52 6.656 24.1152 9.984 36.7616 9.984s25.2416-3.328 36.7616-9.984l112.8448-65.1776c22.9888-13.2608 36.7616-37.0688 36.7616-63.6416 0-26.5728-13.7216-50.3808-36.7616-63.6416z m-30.72 74.0864l-112.8448 65.1776c-5.2224 3.0208-9.8304 1.28-12.0832 0-2.2528-1.28-6.0416-4.4032-6.0416-10.4448V438.9888c0-6.0416 3.7888-9.1648 6.0416-10.4448 1.3312-0.768 3.4816-1.6896 6.0416-1.6896 1.792 0 3.84 0.4608 5.9904 1.6896l112.8448 65.1776c5.2224 3.0208 6.0416 7.8336 6.0416 10.4448 0.0512 2.6112-0.7168 7.424-5.9904 10.4448z"
          fill="#5D5D66" p-id="1290"></path>
        <path
          d="M920.0128 287.2832c-25.344-14.6432-55.6032-14.6432-80.9472 0l-28.16 16.2304V275.968c0-62.2592-50.6368-112.896-112.896-112.896H191.3856c-62.2592 0-112.896 50.6368-112.896 112.896v456.3968c0 62.2592 50.6368 112.896 112.896 112.896h506.6752c62.2592 0 112.896-50.6368 112.896-112.896v-27.5456l28.16 16.2304c12.6464 7.3216 26.5728 10.9568 40.448 10.9568s27.8016-3.6352 40.448-10.9568c25.344-14.6432 40.448-40.8064 40.448-70.0928V357.376c0.0512-29.2864-15.104-55.5008-40.448-70.0928z m-170.496 445.0816c0 28.3648-23.0912 51.456-51.456 51.456H191.3856c-28.3648 0-51.456-23.0912-51.456-51.456V275.968c0-28.3648 23.0912-51.456 51.456-51.456h506.6752c28.3648 0 51.456 23.0912 51.456 51.456v456.3968z m149.5552-81.3568c0 10.1376-6.8096 15.2064-9.728 16.896-2.9184 1.6896-10.7008 5.0688-19.5072 0l-58.88-33.9968V374.4768l58.88-33.9968c8.8064-5.0688 16.5888-1.6896 19.5072 0 2.9184 1.6896 9.728 6.7072 9.728 16.896v293.632z"
          fill="#5D5D66" p-id="1291"></path>
        <path
          d="M244.8384 246.3232c-42.0352 0-76.2368 34.2016-76.2368 76.2368s34.2016 76.2368 76.2368 76.2368S321.0752 364.5952 321.0752 322.56s-34.2016-76.2368-76.2368-76.2368z m0 91.0336c-8.192 0-14.7968-6.656-14.7968-14.7968 0-8.192 6.656-14.7968 14.7968-14.7968s14.7968 6.656 14.7968 14.7968-6.656 14.7968-14.7968 14.7968z"
          fill="#5D5D66" p-id="1292"></path>
      </svg>
      <span>查看结果视频轨道</span>
    </button>
  </div>
  <script>
    function getQueryString(name) {
      const reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
      const r = window.location.search.substr(1).match(reg);
      if (r != null) return decodeURI(r[2]); return null;
    }

    function initVideo(videoWrap, video, videoBackup, playBtn, puseBtn, openBtn1, openBtn2) {
      const [enCodeUrl, enCodeUrlBackup] = [getQueryString('url'), getQueryString('urlBackup')]
      if (enCodeUrl && enCodeUrlBackup) {
        video.src = decodeURIComponent(enCodeUrl)
        videoBackup.src = decodeURIComponent(enCodeUrlBackup)
      } else {
        video.parentNode.remove()
        videoBackup.parentNode.remove()
        const div = document.createElement('div')
        div.className = "error"
        div.innerHTML = "<h3>非常抱歉, 视频加载错误 （ｉДｉ）</h3>"
        videoWrap.appendChild(div)
        playBtn.disabled = true
        puseBtn.disabled = true
        openBtn1.disabled = true
        openBtn2.disabled = true
      }
    }

    window.onload = () => {
      const playBtn = document.querySelector('button[playBtn]')
      const puseBtn = document.querySelector('button[puseBtn]')
      const openBtn1 = document.querySelector('button[openBtn1]')
      const openBtn2 = document.querySelector('button[openBtn2]')
      const videoWrap = document.querySelector('.video')
      const video = document.querySelector('video.primary')
      const videoBackup = document.querySelector('video.backup')

      initVideo(videoWrap, video, videoBackup, playBtn, puseBtn, openBtn1, openBtn2)

      playBtn.addEventListener('click', () => {
        if (video.paused && videoBackup.paused) {
          video.play()
          videoBackup.play()
          playBtn.disabled = true
          puseBtn.disabled = false
        }
      })
      puseBtn.addEventListener('click', () => {
        if (!video.paused && !videoBackup.paused) {
          video.pause()
          videoBackup.pause()
          playBtn.disabled = false
          puseBtn.disabled = true
        }
      })
      openBtn1.addEventListener('click', () => {
        window.open(videoBackup.src)
      })
      openBtn2.addEventListener('click', () => {
        window.open(video.src)
      })
      video.onended = () => {
        playBtn.disabled = false
        puseBtn.disabled = true
      }
    }
  </script>
</body>

</html>
